:original_name: lts_04_1032.html

.. _lts_04_1032:

Collecting Logs Using APIs
==========================

You can report logs to LTS with REST APIs. LTS supports APIs for reporting logs and high-precision logs.

.. table:: **Table 1** Scenarios

   +----------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------+------------------------------------------------------------------------------------------------------------+
   | API                                                | Log Time                                                                                                                    | Example                                             | Scenario                                                                                                   |
   +====================================================+=============================================================================================================================+=====================================================+============================================================================================================+
   | :ref:`Reporting Logs <lts_04_0216>`                | When invoking the API to upload a batch of logs, you can specify an initial time with log_time_ns field.                    | .. code-block::                                     | The logs are generated in sequence at similar time.                                                        |
   |                                                    |                                                                                                                             |                                                     |                                                                                                            |
   |                                                    | Time of each log can be calculated with log_time_ns+sequence count.                                                         |    {                                                |                                                                                                            |
   |                                                    |                                                                                                                             |        "log_time_ns": "1586850540000000000",        |                                                                                                            |
   |                                                    |                                                                                                                             |        "contents": [                                |                                                                                                            |
   |                                                    |                                                                                                                             |            "log1",                                  |                                                                                                            |
   |                                                    |                                                                                                                             |            "log2"                                   |                                                                                                            |
   |                                                    |                                                                                                                             |        ],                                           |                                                                                                            |
   |                                                    |                                                                                                                             |        "labels": {                                  |                                                                                                            |
   |                                                    |                                                                                                                             |            "user_tag": "string"                     |                                                                                                            |
   |                                                    |                                                                                                                             |        }                                            |                                                                                                            |
   |                                                    |                                                                                                                             |    }                                                |                                                                                                            |
   |                                                    |                                                                                                                             |                                                     |                                                                                                            |
   |                                                    |                                                                                                                             | When reported to LTS:                               |                                                                                                            |
   |                                                    |                                                                                                                             |                                                     |                                                                                                            |
   |                                                    |                                                                                                                             | The time of log1 is **1586850540000000000**.        |                                                                                                            |
   |                                                    |                                                                                                                             |                                                     |                                                                                                            |
   |                                                    |                                                                                                                             | The time of log2 is **1586850540000000001**.        |                                                                                                            |
   +----------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------+------------------------------------------------------------------------------------------------------------+
   | :ref:`Reporting High-Precision Logs <lts_04_0217>` | When you invoke the API to upload a batch of logs, the log_time_ns field must be used to specify the log time for each log. | .. code-block::                                     | The uploaded logs are generated out of order at different times. Each log needs to have its own timestamp. |
   |                                                    |                                                                                                                             |                                                     |                                                                                                            |
   |                                                    |                                                                                                                             |    {                                                |                                                                                                            |
   |                                                    |                                                                                                                             |        "contents":[                                 |                                                                                                            |
   |                                                    |                                                                                                                             |            {                                        |                                                                                                            |
   |                                                    |                                                                                                                             |                "log_time_ns":"1586850540000000000", |                                                                                                            |
   |                                                    |                                                                                                                             |                "log":"log3"                         |                                                                                                            |
   |                                                    |                                                                                                                             |            },                                       |                                                                                                            |
   |                                                    |                                                                                                                             |            {                                        |                                                                                                            |
   |                                                    |                                                                                                                             |                "log_time_ns":"1586850540000000008", |                                                                                                            |
   |                                                    |                                                                                                                             |                "log":"log4"                         |                                                                                                            |
   |                                                    |                                                                                                                             |            }                                        |                                                                                                            |
   |                                                    |                                                                                                                             |        ],                                           |                                                                                                            |
   |                                                    |                                                                                                                             |        "labels":{                                   |                                                                                                            |
   |                                                    |                                                                                                                             |            "user_tag":"string"                      |                                                                                                            |
   |                                                    |                                                                                                                             |        }                                            |                                                                                                            |
   |                                                    |                                                                                                                             |    }                                                |                                                                                                            |
   |                                                    |                                                                                                                             |                                                     |                                                                                                            |
   |                                                    |                                                                                                                             | When reported to LTS:                               |                                                                                                            |
   |                                                    |                                                                                                                             |                                                     |                                                                                                            |
   |                                                    |                                                                                                                             | The time of log3 is **1586850540000000000**.        |                                                                                                            |
   |                                                    |                                                                                                                             |                                                     |                                                                                                            |
   |                                                    |                                                                                                                             | The time of log4 is **1586850540000000008**.        |                                                                                                            |
   +----------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------+------------------------------------------------------------------------------------------------------------+
